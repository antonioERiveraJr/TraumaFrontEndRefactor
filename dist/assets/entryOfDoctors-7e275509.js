import{_ as U,Y as F,r as u,u as N,w as O,d as i,e as j,f as s,g as p,i as b,H as T,k as l,m as V,j as r,y as n,E as h,l as g,D as d,F as M,I as Y}from"./index-e3887d48.js";const A={key:0,class:"flex justify-content-center align-items-center",style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100vh","backdrop-filter":"blur(5px)","z-index":"9999","background-color":"rgba(255, 255, 255, 0.5)"}},R={class:"card"},q={key:0,class:"pi pi-heart-fill",style:{color:"lightseagreen"},title:"Your Entry"},z={key:1,class:"ml-3 pi pi-bookmark-fill",title:"Latest Diagnosis",style:{color:"red"}},H={__name:"entryOfDoctors",props:{enccode:{type:String,required:!0}},setup(D){const w=F(),o=u([]),m=u(!1),y=new Y,_=N(),f=u(!1),S=u(!1),v=D,k=async()=>{if(o.value=await y.getEntryOfDoctors(v.enccode),Array.isArray(o.value)&&o.value.length>0){_.firstDiagnosis=!1;try{const a=await y.getLatestEntryOfDoctors(v.enccode);a&&(o.value=o.value.map(e=>({...e,isLatest:e.id===a.id,formUser:w.userInfo.employeeid===e.entryby})))}catch(a){console.log("Error fetching latest entry: ",a)}}else f.value=!0};O(()=>_.dataIsLoaded,a=>{a===!0&&k()});function x(a){return[{"bg-primary":a.primediag==="Y"}]}return(a,e)=>{const L=i("Button"),B=i("Message"),c=i("Column"),C=i("DataTable"),E=i("Sidebar"),I=j("tooltip");return s(),p(M,null,[S.value?(s(),p("div",A,e[2]||(e[2]=[b("img",{src:T,alt:"Loading...",style:{height:"10rem",width:"10rem"}},null,-1)]))):l("",!0),V(r(L,{class:"floating-logo border border-gray-300 rounded-lg bg-blue-400 text-white font-semibold hover:bg-green-600 transition duration-200 ease-in-out shadow-lg",icon:"pi pi-arrow-up",onClick:e[0]||(e[0]=t=>m.value=!0)},null,512),[[I,"List of Forms",void 0,{top:!0}]]),r(E,{visible:m.value,"onUpdate:visible":e[1]||(e[1]=t=>m.value=t),header:"Left Sidebar",position:"bottom",style:{height:"auto","border-radius":"5px"},class:"p-2 m-3 rounded-t-lg"},{default:n(()=>[b("div",R,[f.value?(s(),h(B,{key:0},{default:n(()=>e[3]||(e[3]=[g("No Recent Form Submission / Diagnosis")])),_:1})):l("",!0),f.value?l("",!0):(s(),h(C,{key:1,sortField:"tstamp",value:o.value,metaKeySelection:!1,selectionMode:"single",rowClass:x},{default:n(()=>[r(c,null,{body:n(t=>[t.data.formUser?(s(),p("i",q)):l("",!0),t.data.isLatest?(s(),p("i",z)):l("",!0)]),_:1}),r(c,{field:"entryby",header:"Entry By"},{body:n(t=>[g(d(t.data.empprefix)+" "+d(t.data.firstname)+" "+d(t.data.lastname),1)]),_:1}),r(c,{field:"diagtext",header:"Diagnosis "}),r(c,{field:"tstamp",header:"Date"},{body:n(t=>[g(d(new Date(t.data.tstamp).toLocaleDateString("en-US"))+" "+d(new Date(t.data.tstamp).toLocaleTimeString("en-US",{hour12:!0})),1)]),_:1})]),_:1},8,["value"]))])]),_:1},8,["visible"])],64)}}},$=U(H,[["__scopeId","data-v-9710074e"]]);export{$ as default};

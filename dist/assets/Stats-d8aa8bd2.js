import{r as n,p as V,H as $,x as j,o as M,d as c,f as m,g,i as t,J as D,j as a,k,K as B,M as F,_ as E,y as N,N as P,O as U,m as h,P as _,Q as O,I as R}from"./index-0d53e2ea.js";const z={class:"flex align-items-center justify-content-center overflow-hidden"},K={class:"flex flex-column align-items-center justify-content-center"},W={style:{"border-radius":"56px",padding:"0.3rem",background:"linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"}},A={class:"w-full surface-card py-6 px-5 sm:px-8",style:{"border-radius":"53px"}},q={class:"flex justify-content-between"},H={key:0},G={__name:"LoginStats",setup(S,{emit:x}){const f=x,i=n(""),r=n(""),y=V();$();const l=new F,w=j({waitingSeverity:"info",waitingSummary:"Logging in...",waitingMessage:"Please wait..."},{successSeverity:"success",successSummary:"Login successful",successMessage:"Redirecting..."},{errorSeverity:"error",errorSummary:"Error",errorMessage:"Login failed"},{asyncFunction:async()=>{const o=await l.login(i.value,r.value);if(o.status!==200)throw new Error("Incorrect Credentials");return o},asyncFunctionParams:[]});let u=!1;async function e(){if(!u){u=!0;try{(await w.fetchData()).status==200&&f("login-success")}catch(o){console.error("error logging In: ",o)}finally{u=!1}}}const d=n(!1),p=o=>{const s=o.getModifierState&&o.getModifierState("CapsLock");d.value=s};return M(async()=>{const o=localStorage.getItem("authToken");o&&await l.validateToken(o)?y.push({name:"registry"}):localStorage.clear()}),(o,s)=>{const C=c("InputText"),T=c("Password"),I=c("Button"),L=c("Toast");return m(),g("div",z,[t("div",K,[t("div",W,[t("div",A,[s[8]||(s[8]=t("div",{class:"text-center mb-5"},[t("img",{src:D,alt:"Image",height:"120",class:"mb-3"}),t("div",{class:"text-900 text-3xl font-medium mb-3"},"Welcome!"),t("span",{class:"text-600 font-medium"},"Sign in to continue")],-1)),t("div",null,[s[6]||(s[6]=t("label",{for:"username",class:"block text-900 text-xl font-medium mb-2"},"User Name",-1)),a(C,{id:"username",required:"",type:"text",placeholder:"User Name",class:"w-full md:w-30rem mb-5",style:{padding:"1rem"},modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=v=>i.value=v)},null,8,["modelValue"]),t("div",q,[s[5]||(s[5]=t("label",{for:"password1",class:"block text-900 font-medium text-xl mb-2"},"Password",-1)),d.value?(m(),g("span",H,s[4]||(s[4]=[t("small",{class:"text-red-800 text-xs font-bold"},"Warning: Caps Lock is on",-1)]))):k("",!0)]),a(T,{id:"password1",feedback:!1,onKeydown:p,onKeyup:[p,s[2]||(s[2]=B(v=>e(),["enter"]))],required:"",modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=v=>r.value=v),placeholder:"Password",class:"w-full mb-3",inputClass:"w-full"},null,8,["modelValue"]),s[7]||(s[7]=t("div",{class:"flex align-items-center justify-content-between mb-5 gap-5"},[t("div",{class:"flex align-items-center"},[t("label",{for:"rememberme1"})])],-1)),a(I,{label:"Sign In",class:"w-full p-3 text-xl",onClick:s[3]||(s[3]=v=>e())})])])])]),a(L)])}}};const J={style:{height:"54vh"}},Q={key:0,class:"flex justify-content-center align-items-center",style:{top:"0",left:"0",width:"100%",height:"80vh","backdrop-filter":"blur(5px)","z-index":"9999","background-color":"rgba(255, 255, 255, 0.5)"}},X={style:{width:"100%",height:"25%","margin-bottom":"2%"},class:"mx-2"},Y={style:{width:"100%",height:"25%","margin-bottom":"2%"},class:"mx-2"},Z={class:"mt-5 mx-2 flex justify-content-between",style:{width:"100%",height:"100%"}},ee={__name:"Stats",setup(S){const x=new R,f=n(),i=n(),r=n(!1),y=n(!1),l=n(!1),b=async u=>{var d;r.value=!0;const e=await x.generateStats(f.value,i.value,u);((d=e==null?void 0:e.response)==null?void 0:d.status)===401?(l.value=!0,console.log("showDialog: ",l)):await x.generateStatsToExcel(e),r.value=!1},w=async()=>{l.value=!1,await b(!0)};return(u,e)=>{const d=c("Dialog"),p=c("Button");return m(),g("div",J,[a(d,{visible:l.value,"onUpdate:visible":e[0]||(e[0]=o=>l.value=o),closable:!1},{default:N(()=>[a(G,{onLoginSuccess:w})]),_:1},8,["visible"]),r.value?(m(),g("div",Q,e[6]||(e[6]=[t("img",{src:P,style:{height:"10rem",width:"10rem"}},null,-1)]))):(m(),g("div",{key:1,class:U({blurred:l.value}),style:{height:"100%"}},[t("div",X,[e[7]||(e[7]=t("label",{for:"date",class:"p-float-label font-sans text-black-500 text-xl flex font-bold",style:{color:"#3366ff",width:"100%"}},[t("strong",null,"DATE FROM:")],-1)),h(t("input",{type:"date",id:"date","onUpdate:modelValue":e[1]||(e[1]=o=>f.value=o),class:"p-2 border rounded flex justify-content-center",style:{width:"100%",height:"100%","font-size":"xx-large"}},null,512),[[_,f.value]])]),t("div",Y,[e[8]||(e[8]=t("label",{for:"time",class:"p-float-label font-sans text-black-500 text-xl font-bold",style:{color:"#3366ff",width:"100%"}},[t("strong",null,"DATE TO:")],-1)),h(t("input",{type:"date",id:"time","onUpdate:modelValue":e[2]||(e[2]=o=>i.value=o),class:"p-2 border rounded flex justify-content-center",style:{width:"100%",height:"100%","font-size":"xx-large"}},null,512),[[_,i.value]])]),t("div",Z,[a(p,{type:"button",label:"ONEISS",onClick:e[3]||(e[3]=o=>b(!0)),disabled:y.value,style:{width:"48%",height:"25%",padding:"0px 8px"}},null,8,["disabled"]),a(p,{type:"button",label:"BGHMC",onClick:e[4]||(e[4]=o=>b(!1)),disabled:y.value,style:{width:"48%",height:"25%",padding:"0px 8px"}},null,8,["disabled"])]),l.value?(m(),g("div",{key:0,style:{"background-color":"azure"},class:"overlay",onClick:e[5]||(e[5]=O(()=>{},["prevent"]))})):k("",!0)],2))])}}},se=E(ee,[["__scopeId","data-v-dbb1e948"]]);export{se as default};

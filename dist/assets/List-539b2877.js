import{_ as ae,s as oe,a as ne,b as se,r as l,h as c,u as le,c as i,w as j,o as re,d as y,e as ie,f as P,g as R,i as r,j as f,k as ue,n as z,l as A,m as ce,F as de,I as me,L as ve}from"./index-4c89ee03.js";const pe={components:{Calendar:oe,InjuryList:ne,Toast:se},setup(){const _=new ve,n=l(c().subtract(5,"days").toDate()),b=l(c().toDate()),s=le(),I=l(null),L=l("center"),M=l(!1),g=l(),w=l(null),D=l(null),x=l(null),C=l(null),Y=l(null),S=l(!1),u=l(),m=l([]),F=l(),U=l([{sex:"Male",code:"M"},{sex:"Female",code:"F"},{sex:"All",code:"All"}]),V=l("Date of Injury"),W=l(["Date of Injury","Date of Consultation"]),k=l(null),N=l(null),h=i(()=>m.value.filter(e=>{const o=e.header.patage,a=e.header.patsex,t=e.header.injrem,p=g.value&&g.value.code!=="All"?a===g.value.code:!0,ee=(w.value===null||o>=w.value)&&(D.value===null||o<=D.value),te=F.value?t&&new RegExp(`\\b${F.value.toLowerCase()}\\b`).test(t.toLowerCase()):!0;return p&&ee&&te})),v=i(()=>m.value.length),d=i(()=>h.value.length),E=i(()=>m.value.filter(e=>e.header.patsex==="M").length),O=i(()=>m.value.filter(e=>e.header.patsex==="F").length),B=i(()=>h.value.filter(e=>e.header.patsex==="M").length),T=i(()=>h.value.filter(e=>e.header.patsex==="F").length),q=async()=>{S.value=!0;try{const e=c(x.value).format("YYYY-MM-DD"),o=c(Y.value).format("YYYY-MM-DD"),t=await new me().reportList(!0,e,o,null);m.value=t.data,u.value=!0,S.value=!1}catch(e){console.error("Error fetching report data:",e),I.value.add({severity:"error",summary:"Error",detail:"Could not fetch report data.",life:3e3})}},H=i(()=>{const e={};m.value.forEach(a=>{const p=c(a.header.admdate).format("YYYY-MM");e[p]||(e[p]=0),e[p]++});const o=v.value;return Object.entries(e).map(([a,t])=>({month:a,count:t,percentage:o?(t/o*100).toFixed(1):0}))}),G=i(()=>{const e={};h.value.forEach(a=>{const p=c(a.header.admdate).format("YYYY-MM");e[p]||(e[p]=0),e[p]++});const o=d.value;return Object.entries(e).map(([a,t])=>({month:a,count:t,percentage:o?(t/o*100).toFixed(1):0}))}),J=i(()=>{const e={};m.value.forEach(a=>{const t=_.getDispositionCode(a.header.dispcode);e[t]||(e[t]=0),e[t]++});const o=v.value;return Object.entries(e).map(([a,t])=>({dispCode:a,count:t,percentage:o?(t/o*100).toFixed(1):0}))}),K=i(()=>{const e={};h.value.forEach(a=>{const t=_.getDispositionCode(a.header.dispcode);e[t]||(e[t]=0),e[t]++});const o=d.value;return Object.entries(e).map(([a,t])=>({dispCode:a,count:t,percentage:o?(t/o*100).toFixed(1):0}))}),Q=i(()=>{const e={};m.value.forEach(a=>{const t=_.getOutcomeCode(a.header.condcode);e[t]||(e[t]=0),e[t]++});const o=v.value;return Object.entries(e).map(([a,t])=>({condCode:a,count:t,percentage:o?(t/o*100).toFixed(1):0}))}),X=i(()=>{const e={};h.value.forEach(a=>{const t=_.getOutcomeCode(a.header.condcode);e[t]||(e[t]=0),e[t]++});const o=d.value;return Object.entries(e).map(([a,t])=>({condCode:a,count:t,percentage:o?(t/o*100).toFixed(1):0}))}),Z=i(()=>[{label:"Males ",count:E.value,percentage:`${(E.value/v.value*100).toFixed(1)}%`},{label:"Females ",count:O.value,percentage:`${(O.value/v.value*100).toFixed(1)}%`},{label:"Total ",count:v.value,percentage:""}]),$=i(()=>[{label:"Males ",count:B.value,percentage:d.value?(B.value/d.value*100).toFixed(1)+"%":"0%"},{label:"Females ",count:T.value,percentage:d.value?(T.value/d.value*100).toFixed(1)+"%":"0%"},{label:"Total ",count:d.value,percentage:v.value?(d.value/v.value*100).toFixed(1)+"%":"0%"}]);return j(V,e=>{V.value=e}),j(n,e=>{c(e).format("MM/DD/YYYY")}),j(x,e=>{x.value=c(e).format("MM/DD/YYYY")}),j(Y,e=>{Y.value=c(e).format("MM/DD/YYYY")}),j(b,e=>{if(!n.value){I.value.add({severity:"warn",summary:"Warning",detail:"Please select a start date first.",life:3e3}),b.value=null;return}const o=c(e).format("MM/DD/YYYY"),a=c(n.value).format("MM/DD/YYYY");N.value=o,k.value=a}),re(async()=>{s.registry="old"}),j(()=>s.registry,e=>{e!=="old"&&(s.registry="old")}),{startDate:n,endDate:b,value:V,monthlyInjuryStats:H,filteredStatistics:$,options:W,savedStartDate:k,totalInjury:Z,savedEndDate:N,patientStore:s,visible:M,position:L,toast:I,gender:U,selectedSex:g,selectedNOI:F,ageFrom:w,ageTo:D,dateFrom:x,dateTo:Y,generateReport:q,reportData:m,filteredData:h,filteredReports:d,dataTableVisible:u,totalReports:v,maleCount:E,femaleCount:O,filteredMaleCount:B,filteredFemaleCount:T,loading:S,monthlyInjuryStatsFiltered:G,dispositionInjuryStats:J,dispositionInjuryStatsFiltered:K,outcomeInjuryStats:Q,outcomeInjuryStatsFiltered:X,searchValue:C}}},fe={key:0},he={class:"flex justify-content-between align-itenms-center"},ye={class:"flex align-items-center",style:{width:"25%"}},ge={class:"flex",style:{"max-width":"100%",position:"relative","margin-left":"1%",width:"25%"}},De={class:"calendar-container ml-4"},xe={class:"calendar-container ml-4"},Ye={style:{width:"25%"},class:"flex justify-content-center"};function je(_,n,b,s,I,L){const M=y("ProgressSpinner"),g=y("InputText"),w=y("SelectButton"),D=y("Calendar"),x=y("Button"),C=y("InjuryList"),Y=y("Toast"),S=ie("tooltip");return P(),R(de,null,[r("div",null,[s.loading?(P(),R("div",fe,[f(M,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])):ue("",!0),r("div",he,[r("div",ye,[n[5]||(n[5]=r("i",{class:"pi pi-search ml-4 mr-4",style:{"font-size":"xx-large"}},null,-1)),f(g,{modelValue:s.searchValue,"onUpdate:modelValue":n[0]||(n[0]=u=>s.searchValue=u),placeholder:"( Name / Hospital# / DOI / NOI)",class:"shadow-2",style:{width:"100%",height:"100%"}},null,8,["modelValue"])]),f(w,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=u=>s.value=u),options:s.options,style:{width:"25%"},class:"flex justify-content-center"},null,8,["modelValue","options"]),r("div",ge,[r("div",De,[n[6]||(n[6]=r("strong",{class:"label-from ml-4 mb-1"},"FROM",-1)),f(D,{modelValue:s.startDate,"onUpdate:modelValue":n[2]||(n[2]=u=>s.startDate=u),dateFormat:"mm/dd/yy",style:z([{"max-width":"100%",height:"100%"},{height:"100%"}]),showIcon:!0,class:"w-auto my-auto shadow-4",showButtonBar:!0,todayButton:!0},null,8,["modelValue"])]),r("div",xe,[n[7]||(n[7]=r("strong",{class:"label-to ml-4"},"TO",-1)),f(D,{modelValue:s.endDate,"onUpdate:modelValue":n[3]||(n[3]=u=>s.endDate=u),dateFormat:"mm/dd/yy",style:z([{"max-width":"100%",height:"100%"},{height:"100%"}]),showIcon:!0,class:"w-auto my-auto shadow-4",showButtonBar:!0,todayButton:!0},null,8,["modelValue"])]),n[8]||(n[8]=r("span",{class:"tooltip",style:{cursor:"pointer","margin-left":"0.5%","margin-right":"1%"}},[r("i",{class:"pi pi-question-circle",style:{"font-size":"1.5em"}}),r("span",{class:"tooltiptext"},[A("Please note that you can only select dates within 30 days prior to today. "),r("br"),r("br"),A(" If you need to access dates beyond this range, kindly reach out to the MIS department for assistance.")])],-1))]),r("div",Ye,[ce(f(x,{icon:"pi pi-refresh",size:"large",class:"w-full mr-8 ml-2 shadow-4",onClick:n[4]||(n[4]=u=>s.patientStore.loadSignal=!0)},null,512),[[S,"Refresh List",void 0,{top:!0}]])])])]),r("div",null,[f(C,{style:{width:"100%"},savedStartDate:s.startDate.toString(),savedEndDate:s.endDate.toString(),value:s.value,searchValue:s.searchValue},null,8,["savedStartDate","savedEndDate","value","searchValue"])]),f(Y,{ref:"toast"},null,512)],64)}const we=ae(pe,[["render",je],["__scopeId","data-v-c69b301a"]]);export{we as default};

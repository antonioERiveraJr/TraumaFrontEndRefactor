import{r as c,q as _,$ as L,C as V,o as C,d as r,f as p,g as v,i as t,a0 as h,j as l,k as T,a1 as I,a2 as P}from"./index-30c64b4f.js";const F={class:"surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden"},M={class:"flex flex-column align-items-center justify-content-center"},j={style:{"border-radius":"56px",padding:"0.3rem",background:"linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"}},B={class:"w-full surface-card py-6 px-5 sm:px-8",style:{"border-radius":"53px"}},N={class:"flex justify-content-between"},q={key:0},K={__name:"Login",setup(E){const n=c(""),o=c(""),u=_(),x=L(),d=new P,y=V({waitingSeverity:"info",waitingSummary:"Logging in...",waitingMessage:"Please wait..."},{successSeverity:"success",successSummary:"Login successful",successMessage:"Redirecting..."},{errorSeverity:"error",errorSummmary:"Error",ErrorMessage:"Login failed"},{asyncFunction:async()=>{const s=await d.login(n.value,o.value);if(s.status!==200)throw new Error("Incorrect Credentials");return s},asyncFunctionParams:[]});let i=!1;async function m(){if(!i){i=!0;try{if((await y.fetchData()).status==200){const e=x.query.redirect||"/registry";u.push(e)}}catch{}finally{i=!1}}}const f=c(!1),g=s=>{const e=s.getModifierState&&s.getModifierState("CapsLock");f.value=e};return C(async()=>{const s=localStorage.getItem("authToken");s&&await d.validateToken(s)?u.push({name:"registry"}):localStorage.clear()}),(s,e)=>{const w=r("InputText"),b=r("Password"),k=r("Button"),S=r("Toast");return p(),v("div",F,[t("div",M,[t("div",j,[t("div",B,[e[8]||(e[8]=t("div",{class:"text-center mb-5"},[t("img",{src:h,alt:"Image",height:"120",class:"mb-3"}),t("div",{class:"text-900 text-3xl font-medium mb-3"},"Welcome!"),t("span",{class:"text-600 font-medium"},"Sign in to continue")],-1)),t("div",null,[e[6]||(e[6]=t("label",{for:"username",class:"block text-900 text-xl font-medium mb-2"},"User Name",-1)),l(w,{id:"username",required:"",type:"text",placeholder:"User Name",class:"w-full md:w-30rem mb-5",style:{padding:"1rem"},modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a)},null,8,["modelValue"]),t("div",N,[e[5]||(e[5]=t("label",{for:"password1",class:"block text-900 font-medium text-xl mb-2"},"Password",-1)),f.value?(p(),v("span",q,e[4]||(e[4]=[t("small",{class:"text-red-800 text-xs font-bold"},"Warning: Caps Lock is on",-1)]))):T("",!0)]),l(b,{id:"password1",feedback:!1,onKeydown:g,onKeyup:[g,e[2]||(e[2]=I(a=>m(n.value,o.value),["enter"]))],required:"",modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a),placeholder:"Password",class:"w-full mb-3",inputClass:"w-full"},null,8,["modelValue"]),e[7]||(e[7]=t("div",{class:"flex align-items-center justify-content-between mb-5 gap-5"},[t("div",{class:"flex align-items-center"},[t("label",{for:"rememberme1"})])],-1)),l(k,{label:"Sign In",class:"w-full p-3 text-xl",onClick:e[3]||(e[3]=a=>m(n.value,o.value))})])])])]),l(S)])}}};export{K as default};
